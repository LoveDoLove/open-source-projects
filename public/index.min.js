async function fetchProjects(){const e=await fetch("/data/projects.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json(),r=[];return["github","gitlab","gitee","bitbucket"].forEach(e=>{t.forEach(t=>{const n=t[e];Array.isArray(n)&&n.forEach(e=>{Array.isArray(e.metadata)&&e.metadata.forEach(e=>{r.push({name:"string"==typeof e.name?e.name:Array.isArray(e.name)?e.name.join(", "):"",description:"string"==typeof e.description?e.description:Array.isArray(e.description)?e.description.join(", "):"",topics:Array.isArray(e.topics)?e.topics:[],stargazers_count:"number"==typeof e.stargazers_count?e.stargazers_count:0,forks_count:"number"==typeof e.forks_count?e.forks_count:0,html_url:"string"==typeof e.html_url?e.html_url:"",homepage:"string"==typeof e.homepage?e.homepage:""})})})})}),r}function renderProjects(e){const t=document.getElementById("projects-container");if(t.innerHTML="",!e.length)return void(t.innerHTML='<div class="loading">No projects found.</div>');const r=document.createDocumentFragment();e.forEach(e=>{const t=createProjectCard(e);r.appendChild(t)}),t.appendChild(r)}function createProjectCard(e){const t="string"==typeof e.name?e.name:Array.isArray(e.name)?e.name.join(", "):"",r="string"==typeof e.description?e.description:Array.isArray(e.description)?e.description.join(", "):"",n=Array.isArray(e.topics)?e.topics:"string"==typeof e.topics?[e.topics]:[],o=document.createElement("article");o.className="project-card";const a=document.createElement("h2");a.className="project-title",a.textContent=t||"Unnamed Project",o.appendChild(a);const c=document.createElement("p");if(c.className="project-description",c.textContent=r||"No description available.",o.appendChild(c),n.length>0){const e=document.createElement("div");e.className="project-topics-row",n.forEach(t=>{const r=document.createElement("span");r.className="topic-chip",r.textContent=t,e.appendChild(r)}),o.appendChild(e)}const i=document.createElement("div");if(i.className="project-meta","number"==typeof e.stargazers_count){const t=document.createElement("span");t.className="project-stars",t.textContent=`⭐ Stars: ${e.stargazers_count}`,i.appendChild(t)}if("number"==typeof e.forks_count){const t=document.createElement("span");t.className="project-forks",t.textContent=`🍴 Forks: ${e.forks_count}`,i.appendChild(t)}o.appendChild(i);const s=document.createElement("div");s.className="project-links",e.html_url&&s.appendChild(createGitHubLink(e.html_url)),e.homepage&&e.homepage!==e.html_url&&s.appendChild(createRedirectLink(e.homepage,"Project Homepage")),o.appendChild(s);const p=["name","description","topics","stargazers_count","forks_count","updated_at","html_url","homepage","hostname","github_url","provider","username","repo"];return Object.keys(e).forEach(t=>{if(!p.includes(t)){const r=document.createElement("div");r.className="project-extra";let n=e[t];Array.isArray(n)&&n.every(e=>"string"==typeof e&&1===e.length)?n=n.join(""):Array.isArray(n)&&(n=n.join(", ")),r.textContent=`${t}: ${n}`,o.appendChild(r)}}),o}function createGitHubLink(e){const t=document.createElement("a");return t.href=e,t.className="project-link github-link",t.textContent="View on GitHub",t.target="_blank",t.rel="noopener noreferrer",t.setAttribute("aria-label","View project on GitHub (opens in new tab)"),t.setAttribute("tabindex","0"),t}function createRedirectLink(e,t="Visit Project Website"){const r=document.createElement("a");return r.href=e,r.className="project-link redirect-link",r.textContent=t,r.target="_blank",r.rel="noopener noreferrer",r.setAttribute("aria-label",`${t} (opens in new tab)`),r.setAttribute("tabindex","0"),r}function displayError(e){const t=document.getElementById("projects-container");t.innerHTML=`<div class="error">${e}</div>`}async function initializeProjectShowcase(){try{const e=await fetchProjects();renderProjects(e)}catch(e){displayError("Failed to load projects. Please try again later."),console.error("Error initializing project showcase:",e)}}document.addEventListener("DOMContentLoaded",initializeProjectShowcase);